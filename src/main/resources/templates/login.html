<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login/Register</title>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

    <style>
        body {
            padding-top: 90px;
            background-image: url("https://avatars.mds.yandex.net/get-pdb/872807/870995e1-24c8-4b34-a606-12f2b84bce0d/orig");
        }
        .login-container{
            margin-top: 5%;
            margin-bottom: 5%;
        }
        .login-form-1{
            padding: 5%;
            box-shadow: 5px 5px 8px 0 rgba(0, 0, 0, 0.7), 0 9px 26px 0 rgba(0, 0, 0, 0.9);
            background-color: #666699;
            opacity: 0.8;

        }
        .login-form-1 h3{
            text-align: center;
            color: greenyellow;
            font-style: oblique;
            opacity: 1;

        }
        .login-form-2{
            padding: 5%;
            background: #000000;
            box-shadow: 5px 5px 8px 0 rgba(0, 0, 0, 0.7), 0 9px 26px 0 rgba(0, 0, 0, 0.9);
            opacity: 0.8;
        }
        .login-form-2 h3{
            text-align: center;
            color: red;
            opacity: 1;
        }
        .login-container form{
            padding: 10%;
            opacity: 1;
        }
        .btnSubmit
        {
            width: 50%;
            border-radius: 1rem;
            padding: 1.5%;
            border: none;
            cursor: pointer;
            opacity: 1;
        }
        .login-form-1 .btnSubmit{
            font-weight: 600;
            color: #fff;
            background-color: #0062cc;
            opacity: 1;
        }
        .login-form-2 .btnSubmit{
            font-weight: 600;
            color: #0062cc;
            background-color: #fff;
            opacity: 100%;
        }


    </style>
</head>
<body>

<!------ Include the above in your HEAD tag ---------->

<div id="root">
    <div class="container login-container">
        <div class="row">
            <div class="col-md-6 login-form-1">
                <h3>LOGIN</h3>
                <form>
                    <div class="form-group">
                        <input type="text" v-model= "usernameL" class="form-control" placeholder="Username *" value="" />
                    </div>
                    <div class="form-group">
                        <input type="password" v-model="passwordL" class="form-control" placeholder="Password *" value="" />
                    </div>
                    <div class="form-group">
                        <input type="submit" @click="validateUser" class="btnSubmit" value="Login" />
                    </div>
                </form>
            </div>

            <div class="col-md-6 login-form-2">
                <h3>REGISTER</h3>
                <form>
                    <div class="form-group">
                        <input type="text" v-model="usernameR" class="form-control" placeholder="Username *" value="" />
                    </div>
                    <div class="form-group">
                        <input type="password" v-model= "passwordR" class="form-control" placeholder="Password *" value="" />
                    </div>
                    <div class="form-group">
                        <input type="submit" @click="addUser" class="btnSubmit" value="Register" />
                    </div>
                </form>
            </div>
        </div>
    </div>

</div>
</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://vuejs.org/js/vue.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>


<script>
    var app = new Vue({

        el: '#root',
        data : {
            username: null,
            password: null,
            isActive: null,
            users: [],
            flagRegister: 0,
            validatedUser: null
        },
        mounted(){
            this.fetchUsers();
        },
        methods: {
            fetchUsers(){
                axios.get("/users").then(function(response){
                    this.users = response.data;
                }.bind(this));
            },
            //it takes all customersiwhen page is opening
            addUser(){
                this.fetchUsers();
                for (i = 0; i < this.users.length; i++) {

                    if (this.users[i].username===(this.usernameR)) {
                        this.flagRegister = 1;
                        break;
                    }
                }

                alert("zzz");
                alert(this.flagRegister);
                if(this.flagRegister == 0) {
                    axios({
                        method: 'post',
                        url: 'add',
                        data: {

                            username: this.usernameR,
                            password: this.passwordR


                        }
                    }).then(function(response){
                        alert("xxx");
                    }.bind(this));

                }
                else{
                    alert("This username was previously taken PLEASE TRY AGAIN.... ");

                }
            },

            validateUser(){
                axios({
                    method: 'post',
                    url: '/validateuser',
                    data: {

                        username: this.usernameL,
                        password: this.passwordL


                    }
                }).then(function(response){
                    this.validatedUser = response.data;
                    alert(this.validatedUser);
                }.bind(this));
            }

        }


    });



</script>
</html>
